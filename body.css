/* Font Faces */
@font-face {
    font-family: 'ProLisa';
    src: url('fonts/ProLisa-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'ProLisa';
    src: url('fonts/ProLisa-Bold.ttf') format('truetype');
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'ProLisa';
    src: url('fonts/ProLisa-RegularItalic.ttf') format('truetype');
    font-weight: normal;
    font-style: italic;
}

@font-face {
    font-family: 'MonoLisa';
    src: url('fonts/MonoLisa-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Input';
    src: url('fonts/fonnts.com-InputSansNarrow.otf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Input';
    src: url('fonts/fonnts.com-InputSansNarrow_Bold.otf') format('truetype');
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'Input';
    src: url('fonts/fonnts.com-InputSansNarrow_Italic.otf') format('truetype');
    font-weight: normal;
    font-style: italic;
}

@font-face {
    font-family: 'Input';
    src: url('fonts/fonnts.com-InputSansNarrow_BoldIta.otf') format('truetype');
    font-weight: bold;
    font-style: italic;
}


:root {
    --outline: 0;
    --background: hsla(0, 0%, 36%, 0.15);

    /* Color scheme variables */
    --bg-primary: black;
    --bg-overlay: hsla(0, 0%, 0%, 0.6);
    --bg-card: hsla(240, 40%, 8%, 0.85);
    --bg-transparent: hsla(0, 0%, 0%, 0);
    --bg-primary-soft: hsla(230, 100%, 75%, 0);
    --timer-accent: hsl(240, 100%, 81%);
    --timer-accent-strong: hsl(240, 100%, 95%);
    --timer-accent-muted: hsla(240, 100%, 87%, 0.75);
    --timer-progress-track: hsla(240, 100%, 75%, 0.18);
    --timer-progress-fill: linear-gradient(90deg, hsla(230, 100%, 75%, 0.3), hsla(266, 100%, 78%, 0.75));
    --bg-timer-panel: var(--bg-primary);
    --bg-timer-list: var(--bg-primary);
    

    --text-primary: white;
    --text-secondary: #dfe6ff;
    --text-tertiary: #cfd3db;
    --text-muted: hsla(0, 0%, 100%, 0.5);
    --text-gray: #c7c7c7;
    --text-light-blue: #f1f5ff;

    --border-primary: #444;
    --border-secondary: #333;
    --border-light: hsla(0, 0%, 100%, 0.1);
    --border-lighter: hsla(0, 0%, 100%, 0.06);
    --border-input: hsla(0, 0%, 100%, 0.15);
    --border-feed: hsla(0, 0%, 100%, 0.1);
    --border-bookmark: hsl(230, 50%, 30%);

    --infobox-bg: hsl(0, 0%, 10%);

    /* Hover effect variables */
    --hover-bg: hsla(212, 100%, 65%, 0.1);
    --hover-scale: 1.05;
    --hover-transition: transform 0.2s ease, background 0.15s ease;
}

@media (prefers-color-scheme: light) {
    :root {
        --bg-primary: hsl(0, 0%, 100%);
        --bg-overlay: hsla(0, 0%, 100%, 0.9);
        --bg-card: hsla(240, 100%, 98%, 0.95);
        --bg-transparent: hsla(240, 0%, 100%, 0);
        --bg-overlay: hsla(0, 0%, 100%, 0.7);
        --bg-overlay: hsla(240, 0%, 100%, 0.75);
        --bg-primary: hsl(0, 0%, 91%);
        --bg-primary: hsl(0, 0%, 98%);
        --bg-primary: hsla(240, 100%, 98%, 0.95);
        --bg-primary: hsla(240, 100%, 99%, 0.9);
        --bg-primary: hsla(240, 100%, 67%, 0.4);
        --bg-primary-soft: hsla(240, 100%, 66.86%, 0.15);
        --timer-accent: hsl(240, 50%, 53%);
        --timer-accent-strong: hsl(240, 49%, 29%);
        --timer-accent-muted: hsla(240, 49.33%, 29.41%, 0.65);
        --timer-progress-track: hsla(240, 100%, 66.86%, 0.15);
        --timer-progress-fill: linear-gradient(90deg, hsla(240, 100%, 66.86%, 0.3), hsla(240, 100%, 71.57%, 0.65));
        --bg-timer-panel: var(--bg-primary);
        --bg-timer-list: var(--bg-primary);
        --bg-primary: hsla(240, 100%, 94.9%, 0.95);
        --bg-primary: hsla(240, 0%, 100%, 0);
        --bg-primary: hsla(240, 100%, 98.63%, 0.8);
        --bg-primary: #f8f8f8;

        --text-primary: black;
        --text-secondary: hsl(240, 28%, 14%);
        --text-tertiary: #2c2c3c;
        --text-muted: hsla(240, 0%, 0%, 0.5);
        --text-gray: hsl(0, 0%, 22%);
        --text-light-blue: #0e1020;

        --border-primary: #ccc;
        --border-secondary: #ddd;
        --border-light: hsla(240, 0%, 0%, 0.1);
        --border-lighter: hsla(240, 0%, 0%, 0.06);
        --border-input: hsla(240, 0%, 0%, 0.2);
        --border-feed: hsla(240, 0%, 0%, 0.1);
        --border-bookmark: hsla(240, 30%, 70%, 1);

        --infobox-bg: #fafafa;

       

        /* Hover effect variables (same in both modes) */
        --hover-bg: hsla(240, 100%, 64.51%, 0.1);
        --hover-scale: 1.05;
        --hover-transition: transform 0.2s ease, background 0.15s ease;
    }

    /* Remove shadows, backgrounds, and gradients in light mode */
    .feed-item {
        background: transparent !important;
        box-shadow: none !important;
        border-color: #ddd !important;
    }

    .feed-item:hover {
        box-shadow: none !important;
    }

    .feed-controls {
        background: transparent !important;
        filter: none !important;
        box-shadow: none !important;
        border-color: #ddd !important;
    }

    .timer-panel {
        background: transparent !important;
        box-shadow: none !important;
        border-color: #ddd !important;
    }

    .timer-add-shell {
        background: transparent !important;
        box-shadow: none !important;
        border-color: #ddd !important;
    }

    .timer-row {
        background: transparent !important;
        box-shadow: none !important;
        border-color: #ddd !important;
    }

    .timer-add-btn {
        background: transparent !important;
        box-shadow: none !important;
        border-color: #666 !important;
    }

    .timer-add-btn:hover {
        background: hsla(240, 100%, 64.51%, 0.1) !important;
        box-shadow: none !important;
    }

    .timer-panel {
        color: #333 !important;
    }

    .timer-name {
        color: #222 !important;
    }

    .timer-time {
        color: #555 !important;
    }

    .timer-remaining {
        color: hsl(240, 50%, 53%) !important;
        text-shadow: none !important;
    }

    .timer-tab-btn {
        color: #555 !important;
        background: hsla(240, 0%, 0%, 0.05) !important;
        border-color: #ccc !important;
    }

    .timer-tab-btn.is-active {
        color: #333 !important;
        background: hsla(240, 100%, 64.51%, 0.15) !important;
        border-color: hsl(240, 100%, 65%) !important;
    }

    .timer-chip {
        color: #555 !important;
        background: hsla(240, 0%, 0%, 0.05) !important;
        border-color: #ccc !important;
    }

    .timer-chip.is-active {
        color: #333 !important;
        background: hsla(240, 100%, 64.51%, 0.15) !important;
        border-color: hsl(240, 100%, 65%) !important;
    }

    .timer-label-input,
    .timer-countdown-inputs select,
    .timer-date-input {
        color: #333 !important;
        background: white !important;
        border-color: #ccc !important;
    }

    .timer-label-input::placeholder,
    .timer-date-input::placeholder {
        color: #888 !important;
    }

    .timer-empty {
        color: #666 !important;
    }

    .timer-icon-btn,
    .timer-interval-toggle {
        color: #333 !important;
        background: hsla(240, 0%, 0%, 0.05) !important;
        border-color: #ccc !important;
    }

    .timer-icon-btn:hover,
    .timer-interval-toggle:hover {
        background: hsla(240, 100%, 64.51%, 0.15) !important;
        border-color: hsl(240, 100%, 65%) !important;
    }

    .timer-add-btn {
        color: #333 !important;
    }

    .wiki-toc-container,
    .wiki-infobox-container,
    .wiki-article {
        background: transparent !important;
        box-shadow: none !important;
        border-color: #ddd !important;
    }

    .folder-btn {
        background: transparent !important;
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }

    .view-toggle-chip {
        background: transparent !important;
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }

    overview::after {
        background: transparent !important;
    }

    /* Search suggestions in light mode */
    .suggestion-item {
        color: #333 !important;
    }

    .suggestion-item.nav-highlight,
    .suggestion-item:hover {
        background: hsla(240, 100%, 64.51%, 0.15) !important;
        color: #333 !important;
    }

    .nav-highlight {
        background: hsla(240, 100%, 64.51%, 0.15) !important;
        color: #333 !important;
    }

    /* Wikipedia content in light mode */
    .wiki-toc a {
        color: hsl(240, 100%, 65%) !important;
    }

    .wiki-toc a:hover {
        color: hsl(240, 83%, 53%) !important;
    }

    text table th {
        color: #333 !important;
    }

    overview table th {
        color: #333 !important;
    }
}



/* Chrome, Safari, new Edge, Opera */
.scrollable::-webkit-scrollbar {
    display: none;
}

.scrollable {
    -ms-overflow-style: none;
    scrollbar-width: none;
}


* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    display: grid;
    grid-template-rows: 1fr auto;
    grid-template-areas:
        "top"
        "bottom";
    gap: 0%;
    height: 100vh;
    padding: 0%;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-family: 'Input', 'ProLisa', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-size: 16px;
    line-height: 1.5;
}

top {
    grid-area: top;
    outline: none;
    display: grid;
    grid-template-rows: auto 1fr;
    grid-template-areas:
        "header"
        "overview";
    gap: 0.5%;
    padding: 0.5%;
    min-height: 0;
}

bottom {
    grid-area: bottom;
    display: none;
}

header {
    grid-area: header;
    outline: none;
    display: flex;
    flex-direction: column;
    gap: 0.1rem;
    padding-left: 0.5%;
    min-height: 0;
}

.header-main {
    display: grid;
    grid-template-columns: auto 1fr;
    grid-template-areas: "search main-text";
    align-items: center;
    gap: 0.75rem;
}

.header-main main-text {
    display: grid;
    grid-template-rows: 2fr 1fr;
    grid-template-areas:
        "page-title"
        "subtitle";
    gap: 1%;
    outline: 2px solid hsla(90, 100%, 50%, var(--outline));
}

page-title {
    grid-area: page-title;
    outline: 2px solid hsla(240, 100%, 50%, var(--outline));
    font-size: 1.8rem;
}

page-title a {
    cursor: pointer;
    transition: color 0.2s ease;
}

page-title a:hover {
    color: hsl(240, 100%, 74%);
}

.clock-toggle {
    background: transparent;
    border: none;
    color: inherit;
    font: inherit;
    font-size: 2.6rem;
    cursor: pointer;
    padding: 0;
    text-align: left;
    transition: color 0.2s ease, transform 0.2s ease;
}

.clock-toggle:hover {
    transform: translateY(-1px);
}

.clock-toggle.active {
    color: hsl(242, 100%, 94%);
}

.clock-toggle:focus-visible {
    outline: 2px solid blue;
    outline-offset: 4px;
}

.header-active-bar {
    position: sticky;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    border-left: 1px solid hsl(240, 50%, 50%);
    border-right: 1px solid hsl(240, 50%, 50%);
    border-bottom: 1px solid hsl(240, 50%, 50%);
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
    background: linear-gradient(
        180deg,
        hsla(240, 100%, 0%, .9) -10%,
        hsla(240, 100%, 50%, 0) 50%
    );
    filter: drop-shadow(0px -1px 12px hsl(198, 100%, 15%));
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding: 0.3rem 0.6rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0;
    justify-content: flex-start;
    min-height: 2.5rem;
    margin-bottom: 0;
}

.header-active-bar .header-timer {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 6rem;
    max-width: 10rem;
    font-size: 0.6rem;
    text-align: left;
    text-shadow: 0 0 6px hsla(240, 0%, 0%, 0.45);
    border: 1px solid hsl(240, 50%, 50%);
    border-radius: 100px;
}

.header-active-bar .header-timer-name {
    font-weight: 500;
    
    
}

.header-active-bar .header-timer-remaining {
    font-size: 0.7rem;
    color: hsla(240, 0%, 100%, 0.75);
    
}

@media (prefers-color-scheme: light) {
    .header-active-bar .header-timer-remaining {
        color: hsla(240, 0%, 0%, 0.2);
    }
}

subtitle {
    grid-area: subtitle;
    outline: 2px solid hsla(70, 100%, 50%, var(--outline));
}

subtitle a {
    cursor: pointer;
    transition: color 0.2s ease;
    color: #ffffff;
    font-size: 1.1rem;
}

subtitle a:hover {
    color: hsl(240, 100%, 83%);
}
@media (prefers-color-scheme: light) {
    subtitle a {
        color: #000000;
    }

    subtitle a:hover {
        color: hsl(240, 100%, 65%);
    }
}

body.light-mode details.bookmark-folder > summary {
    color: #000000;
}

overview {
    grid-area: overview;
    outline: none;
    padding: 0% .5% 0% .5%;
    border-radius: 0px;
    min-height: 0;
    position: relative;
    overflow: auto;
    max-height: 100%;
}

overview::after {
    content: '';
    position: sticky;
    bottom: 0;
    left: 0;
    right: 0;
    scale: 100%;
    height: 110px;
    pointer-events: none;
    background: linear-gradient(180deg, hsla(240, 63.64%, 4.31%, 0) 0%, hsla(240, 63.64%, 4.31%, 0.85) 100%);
    z-index: 2;
}

overview a,
overview a:visited,
text a,
text a:visited {
    color: hsl(240, 100%, 74%);
}

overview a:hover,
text a:hover {
    color: hsl(240, 100%, 83%);
}

header search-container {
    grid-area: search;
    height: 100%;
    padding: 0;
    display: flex;
    align-items: center;
    justify-self: end;
    width: max-content;
}

search-container .search-trigger {
    background: none;
    border: none;
    color: var(--text-primary);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0rem 0rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

search-container .search-trigger:hover {
    color: hsl(240, 100%, 65%);
}

.page-title-display {
    width: 100%;
}

.page-title-input {
    display: none;
    width: 100%;
    background: transparent;
    border: none;
    color: var(--text-primary);
    font-size: 1.8rem;
    font-family: 'ProLisa', 'Input Sans Narrow', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    padding: 0;
    margin: 0;
}

.page-title-input:focus {
    outline: none;
}

body.search-mode .page-title-input {
    display: block;
}

body.search-mode .page-title-display {
    display: none;
}

body.task-modal-open {
    overflow: hidden;
}

.quick-search-links {
    display: flex;
    flex-direction: column;
    gap: 0;
    padding: 0;
    
}

.quick-search-links a {
    color: hsl(240, 100%, 65%);
    text-decoration: none;
    padding: 0.2rem;
    background: transparent;
    border-bottom: 1px solid var(--border-secondary);
    cursor: pointer;
    transition: background 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    justify-content: flex-start;
    width: 100%;
}

.quick-search-links span {
    flex: 1;
    text-align: left;
}

.quick-search-links a:hover {
    background: var(--bg-primary);
}

.quick-task-btn {
    padding: 0.3rem;
    border: none;
    border-bottom: 1px solid var(--border-secondary);
    background: transparent;
    color: hsl(240, 100%, 65%);
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    justify-content: flex-start;
    width: 100%;
    text-align: left;
}

.quick-task-btn:hover {
    background: var(--bg-primary);
}

.quick-search-links img {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
}

#task-modal {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
}

#task-modal.visible {
    display: flex;
}

.task-modal-overlay {
    position: absolute;
    inset: 0;
    background: var(--bg-overlay);
}

.task-modal-dialog {
    position: relative;
    background: var(--bg-primary);
    border: 1px solid hsl(240, 100%, 89%);
    border-radius: 12px;
    padding: 0.3rem;
    width: min(420px, 90%);
    z-index: 2001;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.task-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.task-modal-close {
    background: none;
    border: none;
    color: var(--text-primary);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.close-icon {
    width: 48px;
    height: 48px;
    display: block;
    object-fit: contain;
}

.search-icon {
    width: 48px;
    height: 48px;
    display: block;
    object-fit: contain;
}

#task-form label {
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
    font-size: 0.9rem;
}

#task-form input,
#task-form textarea {
    background: var(--bg-primary);
    border: 1px solid var(--border-primary);
    color: var(--text-primary);
    padding: 0.25rem;
    border-radius: 6px;
    font-size: 1rem;
}

.task-modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
}

.task-modal-actions button {
    padding: 0.25rem 75rem;
    border-radius: 6px;
    border: 1px solid hsl(240, 100%, 83%);
    background: transparent;
    color: hsl(240, 100%, 65%);
    cursor: pointer;
}

.task-modal-actions button[type="submit"] {
    background: hsl(240, 100%, 65%);
    color: #041024;
    border-color: hsl(240, 100%, 65%);
}

.task-modal-message {
    font-size: 0.9rem;
    color: hsl(240, 100%, 80%);
    min-height: 1.2rem;
}

text {
    grid-area: text;
    outline: 2px solid hsla(200, 100%, 50%, var(--outline));
    overflow: auto;
    padding: .5rem;
    min-height: 0;
    max-height: 70vh;
}

.bookmark-tree {
    text-align: right;
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.jellyfin-home-panels {
    display: flex;
    flex-direction: column;
    gap: .5rem;
}

.jellyfin-quick-panel {
    border: 2px solid var(--border-bookmark);
    border-radius: 12px;
    padding: 0.4rem .75rem;
    background: hsla(240, 20%, 5%, 0.75);
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 5%;
    box-shadow: 0 20px 45px rgba(0, 0, 0, 0.3);
}

.jellyfin-quick-button {
    width: 18px;
    height: 18px;
    border-radius: 0px;
    border: 1px solid hsla(240, 30%, 70%, 0.6);
    background: hsla(240, 20%, 10%, 0.8);
    color: var(--text-primary);
    font-size: 1.4rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.15s ease, background 0.2s ease, box-shadow 0.2s ease;
}

.jellyfin-quick-button:hover {
    transform: translateY(-2px);
    background: hsla(240, 100%, 64%, 0.3);
    box-shadow: 0 10px 30px rgba(74, 158, 255, 0.3);
}

.jellyfin-home-main {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

details.bookmark-folder {
    width: 100%;
    padding: 0.1rem 0;
}

details.bookmark-folder > summary {
    cursor: pointer;
    padding: 0.4rem;
    color: var(--text-primary);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    list-style: none;
    border: 2px solid var(--border-bookmark);
    border-radius: 4px;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: background 0.15s ease;
}

details.bookmark-folder > summary:hover {
    background: var(--hover-bg);
}

details.bookmark-folder > summary::marker,
details.bookmark-folder > summary::-webkit-details-marker {
    display: none;
    content: '';
}

details.bookmark-folder > summary .folder-name {
    flex: 1;
    text-align: center;
}

details.bookmark-folder > summary .folder-icon {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    transition: transform 0.15s ease;
}

details.bookmark-folder[open] > summary .folder-icon {
    transform: rotate(90deg);
}

.bookmark-children {
    text-align: right;
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
    padding-right: 0.5rem;
}

.bookmark-link {
    padding: 0.4rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.4rem;
    color: var(--text-primary);
    text-decoration: none;
    border-radius: 4px;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: background 0.15s ease;
}

.bookmark-link:hover {
    background: var(--hover-bg);
}

.bookmark-name {
    flex: 1;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.bookmark-favicon {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
}

links,
dock {
    display: none;
}

/* Bluesky-inspired RSS cards */
.feed-region {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 0rem;
    isolation: isolate;
    min-height: 0;
    padding: .5rem;
    max-width: 1100px;
    margin: 0 auto;
}

.bluesky-feed {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    position: relative;
    z-index: 1;
}

.feed-controls {
    position: sticky;
    bottom: 0;
    z-index: 10;
    display: flex;
    background: linear-gradient(
        0deg,
        hsla(240, 100%, 0%, .9) -10%,
        hsla(240, 100%, 50%, 0) 30%);
    flex-direction: column;
    gap: 0.5rem;
    padding: .5rem 1rem;
    margin-top: auto;
    border-top-left-radius: 15px;
    border-top-right-radius: 15px;
    border-top: 1px solid hsl(240, 60%, 41%);
    border-left: 1px solid hsl(240, 60%, 41%);
    border-right: 1px solid hsl(240, 60%, 41%);
    filter: drop-shadow(0px -1px 12px hsl(198, 100%, 15%));
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

.timer-panel {
    display: none;
    flex-direction: column;
    gap: 1.25rem;
    min-height: 0;
    height: 100%;
    padding: 0.5rem;
    background: transparent;
    border: 1px solid hsl(240, 100%, 15%);
    border-radius: 22px;
    color: var(--timer-accent-strong);
    box-shadow: 0 30px 60px hsla(240, 0%, 0%, 0.6);
    backdrop-filter: blur(26px) saturate(110%);
    -webkit-backdrop-filter: blur(26px) saturate(110%);
    position: relative;
    overflow: hidden;
    color-scheme: dark;
}

.timer-panel.open {
    display: flex;
}

.timer-panel-fullscreen {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    padding: .5rem;
}

.timer-panel-fullscreen .timer-panel {
    display: flex;
    flex: 1;
}

.timer-board {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    min-height: 0;
}

.timer-tab-bar {
    display: flex;
    gap: 0.4rem;
    align-items: center;
    border-bottom: 1px solid hsla(240, 0%, 100%, 0.05);
    padding-bottom: 0.2rem;
}

.timer-tab-btn {
    display: flex;
    align-items: center;
    gap: 0.2rem;
    padding: 0.2rem 0.5rem;
    border-radius: 999px;
    border: 1px solid transparent;
    background: hsla(240, 0%, 100%, 0.05);
    color: var(--timer-accent-muted);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: border-color 0.2s ease, color 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
}

.timer-tab-btn .timer-tab-count {
    font-size: 0.8rem;
    opacity: 0.8;
}

.timer-tab-btn.is-active {
    background: hsla(240, 100%, 75%, 0.149);
    color: var(--timer-accent-strong);
    border-color: var(--bg-primary);
    box-shadow: 0 0 10px hsla(240, 100%, 74.71%, 0.2);
}

.timer-tab-contents {
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

.timer-tab-content {
    display: none;
    flex-direction: column;
    gap: 0.6rem;
    height: 100%;
    min-height: 0;
    overflow: auto;
    padding-right: 0.25rem;
}

.timer-tab-content.is-visible {
    display: flex;
}

.timer-items,
.finished-timer-items {
    display: flex;
    flex-direction: column;
    gap: 0.65rem;
    min-height: 0;
}

.timer-add-form {
    margin-top: auto;
    width: 100%;
}

.timer-add-shell {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: .5rem;
    background: linear-gradient(180deg, hsla(240, 100%, 5%, .1) 0%, hsla(240, 100%, 50%, 0) 10%, hsla(240, 100%, 50%, 0) 90%, hsla(240, 100%, 5%, 0.1) 100%);
    border: 1px solid hsl(240, 100%, 15%);
    border-radius: 18px;
    box-shadow: inset 0 1px 0 hsla(240, 0%, 100%, 0.08), 0 18px 35px hsla(240, 0%, 0%, 0.3);
}

.timer-add-row {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    align-items: center;
}

.timer-add-buttons {
    display: flex;
    gap: 0.3rem;
    flex-wrap: wrap;
}

.timer-label-input {
    flex: 1.5 1 200px;
    padding: 0.3rem 0.5rem;
    background: hsla(240, 0%, 100%, 0.03);
    border: 1px solid hsl(240, 100%, 15%);
    border-radius: 12px;
    color: var(--timer-accent-strong);
    font-size: 0.95rem;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

.timer-chip {
    padding: 0.5rem 0.5rem;
    border-radius: 999px;
    border: 1px solid hsla(240, 0%, 100%, 0.1);
    background: hsla(240, 0%, 100%, 0.04);
    color: var(--timer-accent-muted);
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    letter-spacing: 0.02em;
    transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
}

.timer-chip.is-active {
    color: var(--timer-accent-strong);
    border-color: hsla(240, 100%, 74.71%, 0.6);
    background: linear-gradient(135deg, hsla(240, 100%, 74.71%, 0.3), hsla(240, 100%, 75.49%, 0.3));
    box-shadow: 0 0 14px hsla(240, 100%, 74.71%, 0.3);
}

.timer-chip--repeat.is-active {
    background: linear-gradient(135deg, hsla(240, 100%, 77.25%, 0.25), hsla(240, 100%, 87.06%, 0.25));
    border-color: hsla(240, 100%, 77.25%, 0.6);
    color: #dfffe9;
}

.timer-chip--add {
    font-size: .5rem;
    width: 2.25rem;
    height: 2.25rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.timer-duration-menu,
.timer-date-menu {
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: max-height 0.25s ease, opacity 0.25s ease;
}

.timer-duration-menu.is-open,
.timer-date-menu.is-open {
    max-height: 500px;
    opacity: 1;
}

.timer-duration-menu {
    padding-top: 0.3rem;
}

.timer-countdown-inputs {
    flex: 2 1 320px;
    display: grid;
    grid-template-columns: repeat(4, minmax(70px, 1fr));
    gap: 0.3rem;
}

.timer-countdown-inputs select {
    width: 100%;
    padding: 0.5rem;
    background: hsla(240, 0%, 100%, 0.03);
    border: 1px solid hsla(240, 0%, 100%, 0.08);
    border-radius: 12px;
    color: var(--timer-accent-strong);
    font-size: 0.85rem;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.timer-date-input {
    width: 100%;
    padding: 0.5rem 0.5rem;
    background: hsla(240, 0%, 100%, 0.03);
    border: 1px solid hsla(240, 0%, 100%, 0.08);
    border-radius: 12px;
    color: var(--timer-accent-strong);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.timer-date-input:disabled,
.timer-countdown-inputs select:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.timer-label-input::placeholder,
.timer-date-input::placeholder {
    color: var(--timer-accent-muted);
}

.timer-label-input:focus,
.timer-countdown-inputs select:focus,
.timer-date-input:focus {
    outline: none;
    border-color: var(--timer-accent);
    background: hsla(240, 0%, 100%, 0.05);
    box-shadow: 0 0 0 2px hsla(240, 100%, 74.71%, 0.2);
}

.timer-interval-collection {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.timer-interval-draft {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    padding: 0.5rem 0.5rem;
    background: hsla(240, 44.68%, 9.22%, 0.8);
    border: 1px solid hsla(240, 100%, 68%, 0.25);
    border-radius: 12px;
    box-shadow: inset 0 1px 0 hsla(240, 0%, 100%, 0.05);
}

.timer-interval-draft-main {
    display: flex;
    flex: 1;
    gap: 0.4rem;
    align-items: center;
}

.timer-interval-name {
    flex: 1;
    background: transparent;
    border: 1px solid transparent;
    color: var(--timer-accent-strong);
    font-size: 0.5rem;
    padding: 0.2rem 0.5rem;
    border-radius: 8px;
    transition: border-color 0.2s ease;
}

.timer-interval-name:focus {
    outline: none;
    border-color: var(--bg-primary);
}

.timer-interval-duration {
    font-size: 0.8rem;
    color: var(--timer-accent-muted);
}

.timer-interval-remove {
    border: none;
    background: transparent;
    color: hsla(240, 100%, 78.04%, 0.8);
    font-size: 1.1rem;
    cursor: pointer;
    padding: 0.1rem 0.3rem;
    transition: transform 0.15s ease;
}

.timer-interval-remove:hover {
    transform: scale(1.15);
}

.timer-add-footer {
    display: flex;
    justify-content: flex-end;
}

.timer-add-btn {
    flex: 0 0 auto;
    padding: 0.5rem .5rem;
    border-radius: 999px;
    border: 1px solid hsla(240, 100%, 75%, 0.6);
    background: linear-gradient(135deg, hsla(240, 100%, 74.71%, 0.3), hsla(240, 100%, 77.84%, 0.3));
    color: var(--timer-accent-strong);
    font-weight: 700;
    cursor: pointer;
    letter-spacing: 0.05em;
    transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 12px 25px hsla(240, 0%, 0%, 0.3);
}

.timer-add-btn:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, hsla(240, 100%, 74.71%, 0.5), hsla(240, 100%, 77.84%, 0.5));
    box-shadow: 0 15px 30px hsla(240, 0%, 0%, 0.45);
}

.timer-row {
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
    padding: .5rem;
    margin-bottom: 0.4rem;
    border-radius: 12px;
    background: var(--bg-primary);
    border: 1px solid hsla(240, 100%, 68%, 0.3);
    position: relative;
    overflow: hidden;
    color: var(--timer-accent-strong);
    box-shadow: 0 20px 35px hsla(240, 0%, 0%, 0.4);
}

.timer-row:last-child {
    margin-bottom: 0;
}

.timer-row--notime {
    border-style: dashed;
    border-color: hsla(240, 0%, 100%, 0.25);
    background: hsla(240, 41.67%, 9.41%, 0.85);
}

.timer-row-body {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 0.8rem;
}

.timer-row-info {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.timer-name {
    font-weight: 600;
    color: var(--timer-accent-strong);
    letter-spacing: 0.02em;
}

.timer-time {
    display: flex;
    flex-wrap: wrap;
    gap: 0.3rem;
    align-items: center;
    font-size: 0.85rem;
    color: var(--timer-accent-muted);
}

.timer-interval-name-pill {
    padding: 0.2rem 0.5rem;
    border-radius: 999px;
    background: hsla(240, 100%, 74.71%, 0.15);
    color: var(--timer-accent-strong);
    font-size: 0.75rem;
}

.timer-remaining {
    font-family: 'MonoLisa', 'Input', monospace;
    color: var(--timer-accent);
    font-size: .5rem;
    text-shadow: 0 0 6px hsla(240, 100%, 74.71%, 0.3);
}

.timer-total-length {
    font-size: 0.75rem;
}

.timer-no-time-label {
    font-size: 0.78rem;
    color: var(--timer-accent-muted);
    letter-spacing: 0.08em;
    text-transform: uppercase;
}

.timer-progress-fill {
    position: absolute;
    inset: 0;
    background: var(--timer-progress-fill);
    opacity: 0.4;
    width: 100%;
    transform-origin: left center;
    transform: scaleX(0);
    transition: transform 0.3s ease;
    pointer-events: none;
}

.timer-no-time-checkbox {
    display: flex;
    align-items: center;
    margin-right: 0.7rem;
    cursor: pointer;
    position: relative;
}

.timer-no-time-checkbox input {
    position: absolute;
    opacity: 0;
    pointer-events: none;
}

.timer-no-time-checkmark {
    width: 1.2rem;
    height: 1.2rem;
    border-radius: 0.3rem;
    border: 1px solid hsla(240, 0%, 100%, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
}

.timer-no-time-checkmark::after {
    content: '';
    width: 0.4rem;
    height: 0.7rem;
    border-right: 2px solid #fff;
    border-bottom: 2px solid #fff;
    transform: rotate(45deg);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.timer-no-time-checkbox input:checked + .timer-no-time-checkmark {
    background: linear-gradient(135deg, hsla(240, 100%, 74.71%, 0.6), hsla(240, 100%, 77.84%, 0.6));
    border-color: hsla(240, 100%, 74.71%, 0.9);
    box-shadow: 0 0 10px hsla(240, 100%, 74.71%, 0.3);
}

.timer-no-time-checkbox input:checked + .timer-no-time-checkmark::after {
    opacity: 1;
}

.timer-row-controls {
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.timer-icon-btn,
.timer-interval-toggle {
    width: 2.4rem;
    height: 2.4rem;
    border-radius: 50%;
    border: 1px solid hsla(240, 0%, 100%, 0.12);
    background: hsla(240, 0%, 100%, 0.05);
    color: var(--timer-accent-strong);
    font-size: 0.85rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s ease, border-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
}

.timer-icon-btn:hover,
.timer-interval-toggle:hover {
    border-color: hsla(240, 100%, 74.71%, 0.7);
    background: hsla(240, 100%, 74.71%, 0.2);
    box-shadow: 0 0 12px hsla(240, 100%, 74.71%, 0.25);
}

.timer-icon-btn--danger {
    color: #ffc9c9;
    border-color: hsla(240, 100%, 78.04%, 0.4);
}

.timer-icon-btn--danger:hover {
    background: hsla(240, 100%, 78.04%, 0.18);
}

.timer-interval-toggle.is-open {
    background: hsla(240, 100%, 74.71%, 0.2);
    border-color: var(--bg-primary);
    transform: rotate(180deg);
}

.timer-interval-details {
    display: none;
    margin-top: 0.3rem;
    padding: 0.5rem;
    border-radius: 12px;
    border: 1px solid var(--bg-primary-soft);
    background: hsla(240, 50%, 7.06%, 0.85);
    max-height: 320px;
    overflow: auto;
}

.timer-interval-details.is-open {
    display: block;
}

.timer-interval-detail {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.3rem;
    padding: 0.3rem 0;
    border-bottom: 1px solid hsla(240, 0%, 100%, 0.06);
}

.timer-interval-detail:last-child {
    border-bottom: none;
}

.timer-interval-detail.is-current {
    background: hsla(240, 100%, 74.71%, 0.18);
    border-radius: 10px;
    padding: 0.5rem 0.3rem;
}

.timer-interval-detail-main {
    display: flex;
    flex: 1;
    align-items: center;
    gap: 0.3rem;
}

.timer-interval-detail-name {
    flex: 1;
    background: transparent;
    border: 1px solid transparent;
    color: var(--timer-accent-strong);
    font-size: 0.8rem;
    padding: 0.2rem 0.3rem;
    border-radius: 8px;
}

.timer-interval-detail-name:focus {
    outline: none;
    border-color: var(--bg-primary);
}

.timer-interval-detail-duration {
    font-size: 0.75rem;
    color: var(--timer-accent-muted);
}

.timer-row--running {
    border-color: var(--bg-primary);
    box-shadow: 0 0 0 1px hsla(240, 100%, 74.71%, 0.25), 0 15px 28px hsla(240, 0%, 0%, 0.45);
}
.timer-row--finishing {
    animation: timerFlash 1s ease-in-out infinite;
}

.timer-row--finished {
    background: var(--bg-primary);
    border-color: hsla(240, 100%, 78.04%, 0.7);
    color: #ffe0c0;
}

.timer-empty {
    padding: 0.4rem;
    color: var(--timer-accent-muted);
    font-size: 0.85rem;
    font-weight: 500;
    letter-spacing: 0.02em;
}

.timer-empty--compact {
    padding: 0.2rem 0;
    font-size: 0.75rem;
    color: var(--timer-accent-muted);
    font-weight: 500;
}

@keyframes timerFlash {
    0% {
        box-shadow: 0 0 0 hsla(240, 100%, 74.71%, 0.2);
    }
    50% {
        box-shadow: 0 0 18px hsla(240, 100%, 77.84%, 0.65);
    }
    100% {
        box-shadow: 0 0 0 hsla(240, 100%, 74.71%, 0.2);
    }
}

.feed-folder-menu {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
    
}

.view-toggle-chip {
    padding: 0.3rem 0.9rem;
    background: var(--background);
    border: 1px solid hsl(0, 0%, 0%);
    border-radius: 999px;
    color: var(--text-primary);
    font-size: 0.9rem;
    cursor: pointer;
    font-weight: 600;
    box-shadow: none;
    transition: border-color 0.2s ease, color 0.2s ease, background 0.2s ease;
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
}

.view-toggle-chip:hover {
    background: hsla(240, 100%, 62%, 1);
}

.view-toggle-chip.is-active {
    border: 1px solid hsla(240, 100%, 62%, 1);
    background: var(--background);
}

.timer-toggle-btn {
    padding: 0.3rem 0.9rem;
    background: hsla(240, 0%, 100%, 0.02);
    border: 1px solid var(--bg-primary-soft);
    border-radius: 999px;
    color: var(--timer-accent-strong);
    font-size: 0.9rem;
    cursor: pointer;
    transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
}

.timer-toggle-btn.active {
    background: hsla(240, 100%, 50%, 0.2);
    color: var(--timer-accent-strong);
    border-color: var(--bg-primary);
    box-shadow: 0 0 12px hsla(240, 100%, 74.71%, 0.3);
}

.timer-toggle-btn:hover {
    border-color: var(--bg-primary);
    color: var(--timer-accent-strong);
    background: hsla(240, 100%, 74.71%, 0.3);
}

.folder-btn {
    padding: 0.3rem 0.9rem;
    background: hsla(240, 20%, 70%, .15);;
    border: 1px solid hsl(0, 20%, 0%);
    border-radius: 999px;
    color: hsl(0, 0%, 84%);
    font-size: 0.9rem;
    cursor: pointer;
    transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
    backdrop-filter: blur(2.5px);
    -webkit-backdrop-filter: blur(10px);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.4rem;
    min-width: 30px;
}

.folder-btn:hover {
    border-color: hsl(240, 100%, 75%);
    color: var(--text-primary);
    background: hsla(240, 100%, 60%, .3);
}

.folder-btn.active {
    background: hsla(240, 100%, 60%, .25);
    color: hsl(240, 100%, 70%);
    border-color: hsl(240, 100%, 70%);
    font-weight: 600;
    box-shadow: 0 0 8px hsla(240, 100%, 64.51%, 0.25);
}

.folder-icon {
    width: 25px;
    height: 25px;
    display: block;
    border: none;
    padding: 0;
    margin: 0;
    filter: drop-shadow(0 0 2px hsla(240, 0%, 0%, 0.3));
}

/* Icon-only folder buttons should be pill-shaped like text buttons */
.folder-btn:has(> .folder-icon:only-child) {
    min-width: 10px;
    padding: .1rem .5rem;
}

.feed-footer {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 0;
}

.feed-refresh-btn,
.feed-load-more {
    border-radius: 999px;
    padding: 0.4rem 1.1rem;
    border: 1px solid hsla(240, 0%, 100%, 0.25);
    background: hsla(240, 58.02%, 15.88%, 0.6);
    color: #f3f6ff;
    cursor: pointer;
    font-weight: 600;
    letter-spacing: 0.03em;
    transition: background 0.2s ease, transform 0.2s ease, border-color 0.2s ease;
}

.feed-refresh-btn:hover,
.feed-load-more:hover {
    background: hsla(240, 100%, 64.51%, 0.25);
    border-color: hsla(240, 100%, 64.51%, 0.8);
    transform: translateY(-1px);
}

.feed-refresh-btn:disabled,
.feed-load-more:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
}

.feed-load-more {
    padding: 0.5rem 1rem;
    background: var(--bg-primary);
    border: 2px solid hsl(240, 70%, 50%);
    border-radius: 999px;
    color: hsl(240, 100%, 65%);
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.feed-load-more:hover:not(:disabled) {
    background: transparent;
    color: hsl(240, 100%, 50%);
    box-shadow: 0 0 12px hsla(240, 100%, 64.51%, 0.3);
}

.feed-load-more:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.feed-item {
    background: linear-gradient(0deg, hsla(240, 49%, 43%, 0.4) 0%, hsla(240, 46%, 26%, 0.2) 1.5%, hsla(240, 54%, 25%, 0.1) 5%, hsla(230, 59%, 18%, 0.1) 95%, hsla(230, 74%, 17%, 0.2) 97%, hsla(231, 67%, 22%, 0.4) 100%);
    border: 1px solid hsla(240, 100%, 74%, 0.25);
    border-radius: 12px;
    padding: 0.5rem;
    box-shadow: 0 0px 4px hsla(230, 100%, 14%, 0.5);
    backdrop-filter: blur(15px) saturate(120%);
    -webkit-backdrop-filter: blur(15px) saturate(120%);
    transition: border-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
}

.feed-item:hover {
    border-color: hsl(240, 54%, 48%);
    transform: scale(99%);
    
    box-shadow: 0 5px 8px hsla(0, 0%, 0%, 0.4);
}

.feed-item--read {
    opacity: 0.85;
}

.feed-item--read .feed-source-name,
.feed-item--read .feed-title,
.feed-item--read .feed-excerpt {
    color: hsl(240, 49%, 47%);
}

.feed-item-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    margin-bottom: 0.5rem;
}

.feed-top-left {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.feed-top-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: inherit;
    flex: 1;
}

.feed-top-link:focus-visible {
    outline: 2px solid hsla(240, 100%, 65%, 0.6);
    outline-offset: 4px;
    border-radius: 14px;
}

.feed-star-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    transition: color 0.2s ease, transform 0.2s ease;
    padding: 0;
}

.feed-star-btn img {
    width: 26px;
    height: 26px;
    display: block;
    border: none;
}

.feed-star-btn:hover,
.feed-star-btn:focus {
    transform: scale(1.1);
    outline: none;
}

.feed-star-btn.is-starred {
    filter: drop-shadow(0 0 3px hsla(240, 100%, 16.08%, 0.2));
}

.feed-avatar {
    width: 36px;
    height: 36px;
    border-radius: 12px;
    object-fit: cover;
    border: none;
    background: hsla(0, 0%, 100%, 0.02);
}

.feed-avatar--custom {
    object-fit: contain;
    border-color: transparent;
    border: none;
    background: transparent;
    box-sizing: border-box;
    padding: 2px;
}

.feed-avatar--fallback {
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: hsl(240, 100%, 65%);
}

.feed-source {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
    flex: 1;
}

.feed-source-name {
    font-weight: 600;
    font-size: .5rem;
}

.feed-meta-line {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    font-size: 0.85rem;
    color: hsl(240, 100%, 85%);
}

.feed-folder-pill {
    background: hsla(240, 100%, 50%, 0.18);
    color: hsl(240, 100%, 50%);
    padding: 0.15rem 0.5rem;
    border-radius: 999px;
    font-size: 0.8rem;
}

.feed-date {
    color: hwb(240 50% 0%);
}

.feed-item-link {
    text-decoration: none;
    color: inherit;
}

.feed-title {
    font-size: 1.05rem;
    margin: 0;
    line-height: 1.4;
}

.feed-excerpt {
    margin-top: 0.5rem;
    color: var(--text-gray);
    font-size: 0.95rem;
    line-height: 1.6;
}

.feed-excerpt-link {
    display: block;
    color: inherit;
    text-decoration: none;
}

.feed-excerpt-link:hover,
.feed-excerpt-link:focus-visible {
    text-decoration: underline;
}

.feed-media {
    margin-top: 0.75rem;
    border-radius: 14px;
    overflow: hidden;
    border: 1px solid hsla(0, 0%, 100%, 0.08);
    background: hsla(240, 0%, 100%, 0.02);
}

.bluesky-attachments {
    margin-top: 0.75rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 0.5rem;
}

.bluesky-attachment {
    display: block;
    border-radius: 14px;
    overflow: hidden;
    border: 1px solid hsla(240, 0%, 100%, 0.08);
    background: hsla(240, 0%, 100%, 0.05);
}

.bluesky-attachment img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.bluesky-videos {
    margin-top: 0.75rem;
    display: grid;
    gap: 0.6rem;
}

.bluesky-videos video,
.lemmy-video-embed video {
    width: 100%;
    border-radius: 12px;
    border: 1px solid hsla(240, 0%, 100%, 0.12);
    background: hsla(240, 0%, 0%, 0.4);
}

.lemmy-video-embed {
    margin-top: 0.75rem;
}

.bluesky-quote {
    margin-top: 0.65rem;
    padding: 0.5rem 0.rem;
    border-radius: 14px;
    border: 1px solid hsla(240, 100%, 79.02%, 0.25);
    background: hsla(240, 100%, 64.51%, 0.08);
    color: var(--text-color, hsl(240, 100%, 94%));
}

.bluesky-quote-author {
    font-size: 0.85rem;
    color: hsla(240, 100%, 81.18%, 0.9);
    margin-bottom: 0.3rem;
}

.bluesky-rich-embed {
    display: none;
    flex-direction: column;
    gap: 0.65rem;
}

.bluesky-rich-embed--visible {
    display: flex;
    margin-top: 0.65rem;
}

.bluesky-link-card {
    display: flex;
    gap: 0.65rem;
    border-radius: 14px;
    padding: 0.5rem;
    border: 1px solid hsla(240, 0%, 100%, 0.12);
    background: hsla(240, 56.52%, 9.02%, 0.6);
    text-decoration: none;
    color: inherit;
}

.bluesky-link-thumb {
    width: 96px;
    height: 96px;
    object-fit: cover;
    border-radius: 10px;
    flex-shrink: 0;
    border: 1px solid hsla(240, 0%, 100%, 0.1);
}

.bluesky-link-details {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.bluesky-link-title {
    font-weight: 600;
    font-size: 0.95rem;
}

.bluesky-link-description {
    font-size: 0.85rem;
    color: hsla(240, 0%, 100%, 0.7);
    margin: 0;
}

.bluesky-link-host {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: hsla(240, 100%, 79.02%, 0.9);
}

.bluesky-quote-card {
    display: block;
    border-radius: 12px;
    padding: 0.5rem;
    border: 1px solid hsla(240, 100%, 79.02%, 0.3);
    background: hsla(240, 54.72%, 10.39%, 0.7);
    color: inherit;
    text-decoration: none;
}

.bluesky-quote-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.3rem;
}

.bluesky-quote-avatar {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    object-fit: cover;
    border: 1px solid hsla(240, 0%, 100%, 0.2);
}

.bluesky-quote-name {
    font-weight: 600;
    font-size: 0.9rem;
}

.bluesky-quote-handle {
    font-size: 0.8rem;
    color: hsla(240, 0%, 100%, 0.65);
}

.bluesky-quote-text {
    margin: 0.2rem 0 0;
    font-size: 0.92rem;
    color: hsla(240, 0%, 100%, 0.9);
}

.bluesky-image-grid {
    display: grid;
    gap: 0.4rem;
    border-radius: 14px;
    overflow: hidden;
}

.bluesky-image-grid--1 {
    grid-template-columns: 1fr;
}

.bluesky-image-grid--2,
.bluesky-image-grid--4 {
    grid-template-columns: repeat(2, 1fr);
}

.bluesky-image-grid--3 {
    grid-template-columns: repeat(3, 1fr);
}

.bluesky-image {
    display: block;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid hsla(240, 0%, 100%, 0.08);
}

.bluesky-image img {
    width: 100%;
    height: 100%;
    display: block;
    object-fit: cover;
}

.bluesky-video video {
    width: 100%;
    border-radius: 12px;
    border: 1px solid hsla(240, 0%, 100%, 0.12);
    background: hsla(240, 0%, 0%, 0.4);
}

.feed-media--image {
    max-width: 130px;
}

.feed-media--image img {
    width: 100%;
    display: block;
    max-height: 130px;
    object-fit: cover;
}

.feed-image-link {
    display: block;
}

.feed-media--video {
    max-width: 400px;
    background: transparent;
    border: none;
}

.feed-media--vertical {
    max-width: 260px;
}

.feed-video-wrapper {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%;
    background: hsl(0, 0%, 0%);
}

.feed-video-wrapper--vertical {
    padding-bottom: 177.78%;
}

.feed-video-wrapper iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    border: 0;
    border-radius: 12px;
}

.feed-media-link {
    display: block;
    padding: 0.7rem;
    text-align: center;
    color: grey;
    font-weight: 600;
}

.feed-video-link {
    position: relative;
}

.feed-video-play-icon {
    width: 80px;
    height: 80px;
    border: 3px solid transparent;
    border-radius: 24px;
    filter: drop-shadow(0 4px 12px hsla(240, 0%, 0%, 0.6));
    transition: transform 0.25s ease, filter 0.25s ease;
    display: inline-block;
}

.feed-video-link:hover {
    transform: scale(1.02);
    filter: brightness(1.1);
}

.feed-video-link:hover .feed-video-play-icon {
    transform: scale(1.08);
    filter: drop-shadow(0 6px 18px hsla(240, 0%, 0%, 0.75));
}

.feed-video-responsive {
    position: relative;
    width: 100%;
}

.feed-video-link--mobile {
    width: 100%;
}

.feed-video-embed {
    display: none;
    margin-top: 0.75rem;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid hsla(240, 0%, 100%, 0.12);
    background: hsla(240, 0%, 0%, 0.6);
    position: relative;
}

.feed-video-embed::before {
    content: '';
    display: block;
    padding-top: 56.25%;
}

.feed-video-embed iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    border: 0;
    border-radius: 12px;
    background: #000;
}

.desktop-video-embeds .feed-video-embed {
    display: block;
}

.desktop-video-embeds .feed-video-link--mobile {
    display: none !important;
}

.desktop-video-embeds .feed-media--link {
    width: 100%;
    max-width: none;
}

.desktop-video-embeds .feed-media--link .feed-video-embed {
    margin-top: 0.3rem;
}

.feed-metrics {
    margin-top: 0.75rem;
    display: flex;
    flex-wrap: wrap;
    gap: .5rem;
    font-size: 0.9rem;
    color: gray;
}

.feed-metric {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
}

.metric-icon {
    font-size: 0.95rem;
}

/* ============================================================
   ADDITIONAL UI POLISH & TEXT HANDLING
   ============================================================ */

/* Text wrapping and scrolling */
text, overview, dock {
    word-wrap: break-word;
    word-break: break-word;
    overflow-wrap: break-word;
    overflow-y: auto;
    min-height: 0;
    -ms-overflow-style: none;
    scrollbar-width: none;
}

text::-webkit-scrollbar,
overview::-webkit-scrollbar,
dock::-webkit-scrollbar,
.app-links-horizontal::-webkit-scrollbar {
    display: none;
}

/* Hide all scrollbars */
* {
    scrollbar-width: none;
    -ms-overflow-style: none;
}

*::-webkit-scrollbar {
    display: none;
}

/* Input focus states */
input:focus {
    outline: none;
    color: var(--text-primary);
}

/* Link styles */
a {
    transition: opacity 0.2s ease;
}

a:hover {
    opacity: 0.8;
}

/* Tables */
table {
    border-collapse: collapse;
}

/* Images */
img {
    max-width: 100%;
    height: auto;
}

/* Wikipedia content styles */
.infobox {
    background: var(--infobox-bg);
    border: 1px solid var(--border-primary);
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
}

.infobox img {
    max-width: 100%;
}

#toc {
    background: var(--infobox-bg);
    border: 1px solid var(--border-primary);
    padding: 0.5rem;
}

/* Search container positioning */
search-container {
    position: relative;
}

/* Suggestions animations */
.suggestions-container {
    animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* App Icons Horizontal Dock */
.app-links-horizontal {
    display: flex;
    flex-direction: row;
    gap: .5rem;
    padding: 0.5rem;
    overflow-x: auto;
    overflow-y: hidden;
    height: 100%;
    align-items: center;
    white-space: nowrap;
}

.app-icon-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: var(--text-primary);
    transition: var(--hover-transition);
    flex-shrink: 0;
    width: 80px;
    min-height: 0;
    padding: 0.5rem;
    border-radius: 8px;
    background: transparent;
}

.app-icon-item:hover {
    background: var(--hover-bg);
    transform: scale(var(--hover-scale));
}

.app-icon-image {
    width: 48px;
    height: 48px;
    object-fit: contain;
    border-radius: 0px;
    margin-bottom: 0.25rem;
    transition: box-shadow 0.2s ease;
    flex-shrink: 0;
}

.app-icon-title {
    font-size: 0.7rem;
    text-align: center;
    line-height: 1.1;
    word-wrap: break-word;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
}

/* Wikipedia Content Styling */
text table {
    border: 1px solid #888 !important;
    border-collapse: collapse !important;
    background: transparent !important;
    margin: .5rem 0;
}

text td,
text th {
    border: 1px solid #666 !important;
    padding: 0.5rem !important;
    background: transparent !important;
}

text th {
    font-weight: 600;
    color: #ccc;
    
}

text p {
    margin: 0.75rem 0;
    line-height: 1.6;
    
}

text h2,
text h3,
text h4 {
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--text-primary);
}

text ul,
text ol {
    margin: 0.75rem 0;
    padding-left: 2rem;
}

text img {
    max-width: 100%;
    height: auto;
}

/* Wikipedia Infobox Styling in Overview */
overview table {
    border: 1px solid #888 !important;
    border-collapse: collapse !important;
    background: transparent !important;
}

overview td,
overview th {
    border: 1px solid #666 !important;
    padding: 0.5rem !important;
    background: transparent !important;
}

overview th {
    font-weight: 600;
    color: #ccc;
}

overview img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0 auto .5rem;
    border-radius: 4px;
    border: 1px solid #888;
}

/* Wikipedia content with backdrop blur */
.wiki-toc-container,
.wiki-infobox-container,
.wiki-article {
    background: hsla(240, 50%, 4.71%, 0.15);
    backdrop-filter: blur(18px) saturate(120%);
    -webkit-backdrop-filter: blur(18px) saturate(120%);
    border-radius: 14px;
    border: 1px solid hsla(240, 100%, 75%, 0.25);
    box-shadow: 0 20px 35px hsla(240, 0%, 0%, 0.3);
    
}

.wiki-toc-container,
.wiki-infobox-container {
    padding: .5rem;
}

.wiki-article {
    background: hsla(240, 50%, 4.71%, 0.2);
    backdrop-filter: blur(20px) saturate(125%);
    -webkit-backdrop-filter: blur(20px) saturate(125%);
    padding: 1rem;
    border-radius: 12px;
    border: 1px solid hsla(240, 100%, 75%, 0.3);
    box-shadow: 0 30px 45px hsla(240, 0%, 0%, 0.45);
}

.wiki-toc {
    background: transparent !important;
    border-radius: 10px;
    border: 1px solid hsla(240, 0%, 100%, 0.08);
    padding: 0.5rem;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    
}

/* Keyboard Navigation Highlight */
.nav-highlight {
    outline: 2px solid hsl(240, 100%, 50%) !important;
    outline-offset: 2px;
    background: hsla(240, 100%, 65%, 0.15) !important;
    border-radius: 4px;
    position: relative;
    z-index: 10;
}

.suggestion-item.nav-highlight {
    background: hsla(240, 100%, 65%, 0.2) !important;
}

.feed-item.nav-highlight {
    background: hsla(240, 100%, 65%, 0.1) !important;
    border-color: hsl(240, 85%, 31%) !important;
}

.bookmark-link.nav-highlight {
    background: hsla(240, 100%, 64.51%, 0.2) !important;
}

@media (max-width: 900px) and (orientation: portrait) {
    .wiki-article {
        max-height: 35vh;
        overflow-y: auto;
        padding: .5rem;
    }

    .wiki-article::-webkit-scrollbar {
        width: 4px;
    }

    .wiki-article::-webkit-scrollbar-thumb {
        background: hsla(240, 0%, 100%, 0.2);
        border-radius: 999px;
    }
}

.bookmark-link.nav-highlight .bookmark-name {
    color: var(--text-primary) !important;
    font-weight: 600;
}

details.bookmark-folder > summary.nav-highlight {
    background: hsla(240, 100%, 64.51%, 0.2) !important;
    border-color: hsl(240, 100%, 65%) !important;
}

.folder-btn.nav-highlight,
.view-toggle-chip.nav-highlight {
    background: hsla(240, 100%, 64.51%, 0.3) !important;
    border-color: hsl(240, 100%, 65%) !important;
    box-shadow: 0 0 12px hsla(240, 100%, 64.51%, 0.4) !important;
}

dock a.nav-highlight {
    transform: scale(1.1);
    background: hsla(240, 100%, 64.51%, 0.2) !important;
    transition: transform 0.15s ease, background 0.15s ease;
}

/* ============================================================================
   JELLYFIN MEDIA PLAYERS
   ============================================================================ */

.jellyfin-video-player {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: .5rem;
    align-items: center;
}

.jellyfin-video-player video {
    width: min(100%, 960px);
    aspect-ratio: 16 / 9;
    height: auto;
    max-height: none;
    object-fit: contain;
    border-radius: 12px;
    background: #000;
    box-shadow: 0 30px 80px rgba(0, 0, 0, 0.45);
}

.jellyfin-player-toolbar {
    width: min(100%, 960px);
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 0.75rem;
}

.jellyfin-audio-player {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    align-items: center;
}

.jellyfin-mini-player {
    width: min(100%, 720px);
    background: hsla(240, 20%, 5%, 0.85);
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    padding: 0;
    position: relative;
    box-shadow: 0 15px 45px rgba(0, 0, 0, 0.3);
    display: grid;
    grid-template-columns: auto 1fr;
    grid-template-rows: 1fr auto;
    gap: 0;
    overflow: hidden;
}

.jellyfin-mini-art {
    width: 96px;
    height: 96px;
    border-radius: 0;
    overflow: hidden;
    background: #111;
    flex-shrink: 0;
    display: block;
    grid-row: 1 / 3;
    grid-column: 1;
}

.jellyfin-mini-art img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.jellyfin-mini-main {
    grid-row: 1;
    grid-column: 2;
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
    min-width: 0;
    padding: 0.5rem 0.5rem 0.3rem 0.5rem;
}

.jellyfin-mini-meta {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
    min-width: 0;
}

.jellyfin-mini-title-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    justify-content: space-between;
}

.jellyfin-mini-title {
    font-weight: 600;
    font-size: 0.95rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
    min-width: 0;
}

.jellyfin-mini-title a {
    color: inherit;
    text-decoration: none;
}

.jellyfin-mini-title a:hover {
    text-decoration: underline;
}

.jellyfin-mini-subtitle {
    color: #bbb;
    font-size: 0.8rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.jellyfin-mini-subtitle a {
    color: inherit;
    text-decoration: none;
}

.jellyfin-mini-subtitle a:hover {
    text-decoration: underline;
}

.jellyfin-mini-queue {
    color: #888;
    font-size: 0.72rem;
}

.jellyfin-mini-controls {
    display: flex;
    gap: 0.1rem;
    flex-wrap: wrap;
    align-items: center;
    flex-shrink: 0;
}

.jellyfin-mini-control {
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    font-size: 1rem;
    line-height: 1;
    background: hsla(240, 20%, 12%, 0.85);
    color: var(--text-primary);
    cursor: pointer;
    transition: transform 0.15s ease, background 0.2s ease, opacity 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.jellyfin-mini-control:hover {
    transform: translateY(-1px);
    background: hsla(240, 100%, 64%, 0.3);
}

.jellyfin-mini-control.is-active {
    box-shadow: 0 6px 18px rgba(74, 158, 255, 0.3);
    background: hsla(240, 100%, 64%, 0.4);
}

.jellyfin-mini-control.is-active[data-action="toggle-favorite"] {
    background: hsla(46, 100%, 50%, 0.4);
    box-shadow: 0 6px 18px rgba(255, 214, 47, 0.3);
}

.jellyfin-mini-control:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
}

.jellyfin-mini-progress {
    grid-row: 2;
    grid-column: 1 / 3;
    position: relative;
    height: 28px;
    display: flex;
    align-items: center;
}

.jellyfin-mini-time {
    font-size: 0.7rem;
    color: #aaa;
    position: absolute;
    left: 0.5rem;
    bottom: 0.25rem;
    z-index: 2;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

.jellyfin-mini-progress-track {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: hsla(240, 20%, 85%, 0.15);
    overflow: hidden;
    cursor: pointer;
}

.jellyfin-mini-progress-fill {
    position: absolute;
    inset: 0;
    width: 0%;
    background: hsla(240, 80%, 60%, 0.5);
    pointer-events: none;
    transition: width 0.1s ease;
}

.jellyfin-hidden-audio {
    width: 0;
    height: 0;
    opacity: 0;
    pointer-events: none;
}

@media (max-width: 640px) {
    .jellyfin-mini-player {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto;
    }

    .jellyfin-mini-art {
        width: 100%;
        height: 130px;
        grid-row: 2;
        grid-column: 2;
        border-radius: 12px;
    }

    .jellyfin-mini-main {
        grid-row: 2;
        grid-column: 1;
        padding: 0.1rem 0.3rem;
    }

    .jellyfin-mini-controls {
        justify-content: center;
        flex-wrap: wrap;
    }

    .jellyfin-mini-title-row {
        flex-direction: column;
        gap: 0.1rem;
        text-align: center;
    }

    .jellyfin-mini-progress {
        grid-row: 3;
        grid-column: 1;
    }

    .jellyfin-mini-time {
        left: 0rem;
        bottom: 0.25rem;
    }
}

.jellyfin-library-panel {
    background: hsla(240, 20%, 5%, 0.7);
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    padding: .5rem;
    box-shadow: 0 20px 45px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    gap: .5rem;
}

.jellyfin-library-panel-header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 0.7rem;
}

.jellyfin-library-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 0.7rem;
}

.jellyfin-library-card {
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    background: hsla(240, 25%, 8%, 0.85);
    padding: 0.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
    text-align: center;
    color: var(--text-primary);
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.jellyfin-library-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
    background: hsla(240, 20%, 12%, 0.9);
}

.jellyfin-library-card img {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
    border-radius: 10px;
}

.jellyfin-library-card span {
    font-size: 0.95rem;
}

.jellyfin-library-list {
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
}

.jellyfin-library-list button {
    display: flex;
    justify-content: space-between;
    width: 100%;
    background: hsla(240, 20%, 10%, 0.8);
    border: 1px solid var(--border-secondary);
    border-radius: 10px;
    padding: 0.5rem 0.7rem;
    color: var(--text-primary);
    cursor: pointer;
    transition: background 0.15s ease, transform 0.1s ease;
}

.jellyfin-library-list button:hover {
    background: hsla(240, 100%, 64%, 0.15);
    transform: translateY(-1px);
}

.jellyfin-library-track {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.5rem;
}

.jellyfin-tv-seasons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
}

.jellyfin-tv-episodes {
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    padding: 0.7rem;
    background: hsla(240, 20%, 8%, 0.7);
    min-height: 150px;
}

.jellyfin-tv-episodes button {
    width: 100%;
    text-align: left;
    margin-bottom: 0.3rem;
}

.jellyfin-tv-episode-meta {
    color: #9a9a9a;
    font-size: 0.85rem;
}

.jellyfin-open-link {
    transition: background 0.2s ease, transform 0.2s ease;
    align-self: center;

}

.jellyfin-open-link:hover {
    border: 1px solid hsl(240, 100%, 68%) !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(74, 158, 255, 0.3);
}

.jellyfin-track {
    transition: background 0.2s ease;
    display: flex;
    align-items: center;
    gap: .5rem;
    width: 100%;
    background: transparent;
    border: none;
    color: inherit;
    text-align: left;
    padding: 0.7rem .5rem;
    border-bottom: 1px solid var(--border-secondary);
    cursor: pointer;
    font: inherit;
}

.jellyfin-track:hover,
.jellyfin-track:focus-visible {
    background: hsla(240, 100%, 64.51%, 0.1);
}

.jellyfin-track:focus-visible {
    outline: 2px solid hsla(240, 100%, 64.51%, 0.6);
    outline-offset: 0;
}

.jellyfin-track-number {
    width: 32px;
    flex-shrink: 0;
    text-align: center;
    color: #888;
    font-variant-numeric: tabular-nums;
}

.jellyfin-track-body {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
    flex: 1;
}

.jellyfin-track-title {
    font-weight: 500;
}

.jellyfin-track-meta {
    color: #888;
    font-size: 0.85rem;
}

.jellyfin-tracklist {
    width: 100%;
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    background: hsla(240, 20%, 5%, 0.5);
    max-height: 60vh;
    overflow-y: auto;
}

.jellyfin-tracklist h3 {
    font-size: 1.2rem;
    font-weight: 600;
    color: #ccc;
}

.jellyfin-close-player,
.jellyfin-back-button {
    transition: background 0.2s ease, transform 0.2s ease;
    padding: 0.1rem .1rem;
    background: transparent;
    color: #fff;
    border: none;
    cursor: pointer;
    display: inline-block;
}

.jellyfin-close-player:hover,
.jellyfin-back-button:hover {
    background: #44444400 !important;
    transform: translateY(-1px);
}

.jellyfin-album-view {
    width: min(100%, 560px);
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.jellyfin-album-hero {
    display: flex;
    flex-direction: column;
    gap: .5rem;
    align-items: center;
    text-align: center;
}

.jellyfin-album-cover {
    width: min(100px, 50vw);
    aspect-ratio: 1;
    border-radius: 5px;
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.45);
    object-fit: cover;
}

.jellyfin-album-meta {
    color: var(--text-secondary);
}

.jellyfin-playback-controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.75rem;
}

.jellyfin-control-button {
    padding: 0.65rem 1.4rem;
    border-radius: 999px;
    background: hsla(240, 100%, 64%, 0.15);
    border: 1px solid var(--border-secondary);
    color: var(--text-primary);
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.15s ease, background 0.2s ease;
}

.jellyfin-control-button:hover {
    transform: translateY(-1px);
    background: hsla(240, 100%, 64%, 0.3);
}

.jellyfin-control-button.is-active {
    background: hsla(240, 100%, 64%, 0.45);
    border-color: hsl(240, 100%, 65%);
    box-shadow: 0 10px 30px rgba(74, 158, 255, 0.25);
}

.jellyfin-control-button:disabled {
    opacity: 0.45;
    cursor: not-allowed;
    transform: none;
}

.jellyfin-artist-page {
    width: min(100%, 1100px);
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.jellyfin-artist-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: .5rem;
    text-align: center;
}

.jellyfin-artist-image {
    width: min(220px, 60vw);
    aspect-ratio: 1;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.45);
    border: 3px solid hsla(240, 100%, 64%, 0.4);
}

.jellyfin-artist-albums {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: .5rem;
}

.jellyfin-artist-album {
    background: hsla(240, 20%, 5%, 0.6);
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    padding: 0.5rem;
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s ease, background 0.2s ease;
}

.jellyfin-artist-album:hover {
    transform: translateY(-2px);
    background: hsla(240, 20%, 10%, 0.7);
}

.jellyfin-artist-album img {
    width: 100%;
    border-radius: 10px;
    aspect-ratio: 1;
    object-fit: cover;
    margin-bottom: 0.5rem;
}

.jellyfin-empty-state {
    text-align: center;
    color: var(--text-muted);
    padding: 2rem .5rem;
}

.jellyfin-book-viewer {
    width: min(100%, 960px);
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: .5rem;
}

.jellyfin-book-toolbar {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 0.75rem;
    align-items: flex-start;
}

.jellyfin-book-info {
    flex: 1;
    min-width: 220px;
}

.jellyfin-book-title {
    font-size: 1.6rem;
    font-weight: 600;
    margin-bottom: 0.3rem;
}

.jellyfin-book-overview {
    color: #bbb;
    margin: 0;
}

.jellyfin-book-controls {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    align-items: center;
}

.jellyfin-book-page {
    font-weight: 600;
}

.jellyfin-book-frame {
    width: 100%;
    min-height: 70vh;
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    overflow: hidden;
    background: #0e0e0e;
}

.jellyfin-book-frame iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: #fff;
}

.jellyfin-book-status {
    min-height: 1.25rem;
    color: #999;
    font-size: 0.9rem;
}

/* ============================================================================
   UTILITY CLASSES (for reducing inline styles)
   ============================================================================ */

/* Loading and status messages */
.loading-message,
.empty-state,
.error-message,
.info-message {
    padding: .5rem;
    text-align: center;
}

.loading-message,
.info-message {
    color: #888;
}

.empty-state {
    color: #999;
    font-style: italic;
}

.error-message {
    color: #f88;
}

/* Common text colors */
.text-muted {
    color: #888;
}

.text-secondary {
    color: #bbb;
}

.text-error {
    color: #f88;
}

.text-success {
    color: #6f8;
}

.text-link {
    color: #4a9eff;
}

/* Common spacing utilities */
.p-1 {
    padding: .5rem;
}

.p-half {
    padding: 0.5rem;
}

.mt-1 {
    margin-top: .5rem;
}

.mb-1 {
    margin-bottom: .5rem;
}

.gap-half {
    gap: 0.5rem;
}

/* Layout helpers */
.flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

.grid-2col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1%;
}
